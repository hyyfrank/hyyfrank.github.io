---
title: "Play With Nginx (一)"
date: 2017-01-07T12:33:21+08:00
lastmod: 2017-07-07T19:33:29+08:00
draft: false
tags: ["git"]
categories: ["git"]
---

## 1. TODO LIST

- `how to configure nginx when set up`
- `how to optimize the parameter`
- `how to apply rolling log`
- `how to configure load balance`
- `why i have to use lua`
- `how to make force https in lua`
- `how to update the request header`

## 2. Build from source(How To)

### (1).download the source file
Download the nginx package from official website
- Download pcre(`version 1` and `version 4.4 — 8.43`), from the document of nginx, it doesn't support pcre2.
- Download zlib(`version 1.1.3 — 1.2.11`) from official website
- Install openssl via `sudo apt-get install openssl-dev`
Start to build from source
```shell
./configure \
--prefix=/opt/software/nginx/ \
--with-http_stub_status_module \
--with-http_sub_module \
--with-http_gzip_static_module \
--with-pcre=../pcre-8.42 \
--with-zlib=../zlib-1.2.11 \
--with-openssl=../openssl-1.1.1f \
--with-http_secure_link_module \
--with-http_random_index_module \
--with-http_ssl_module \
--with-http_realip_module \
--with-http_addition_module \
--with-http_gzip_static_module \
--with-cc-opt=-O3 \
--with-http_gunzip_module \
--with-http_random_index_module \
--with-http_secure_link_module \
--with-http_auth_request_module \
--with-threads \
--with-stream_ssl_module \
--with-http_slice_module \
--with-file-aio \
--with-http_v2_module \
--without-mail_pop3_module \
--without-mail_imap_module \
--without-mail_smtp_module
make && make install
```


